# Report R0006 - P0-15, P0-16 & P0-17

**Datum:** 2025-12-06
**Task-IDs:** P0-15, P0-16, P0-17
**Status:** ERLEDIGT

---

## Zusammenfassung

OG/Twitter Meta-Tags und Schema.org Images korrigiert. Das fehlende `og-image.jpg` wurde durch das FIMI-Logo ersetzt (temporär).

---

## Problem

Das referenzierte OG-Image `/og-image.jpg` existierte nicht:
- 20 Dateien verwiesen auf nicht-existierende Bilder
- Social Sharing funktionierte nicht korrekt
- Schema.org LocalBusiness hatte falsches Bild

---

## Losung

### 1. Logo als temporares OG-Image

**Verwendetes Bild:** `/FIMI-LOGO/FIMI-LOGO-WEIße_Schrift_mit-Hintergrund.png`
- Navy-Hintergrund (#012956)
- Weisses FIMI-Logo mit Schriftzug
- Funktioniert fur Social Sharing

### 2. Korrigierte Dateien (20 Stuck)

**Globale Konfiguration:**
| Datei | Anderung |
|-------|----------|
| `app/layout.tsx` | OG + Twitter + Schema.org Images |
| `app/page.tsx` | OG Image URL |

**Leistungsseiten - Schema.org LocalBusiness Image (17 Stuck):**
- `app/leistungen/industriereinigung/page.tsx`
- `app/leistungen/unterhaltsreinigung/page.tsx`
- `app/leistungen/maschinenreinigung/page.tsx`
- `app/leistungen/hallenreinigung/page.tsx`
- `app/leistungen/sonderleistungen/page.tsx`
- `app/leistungen/facility-management/page.tsx`
- `app/leistungen/baureinigung/page.tsx`
- `app/leistungen/fensterreinigung/page.tsx`
- `app/leistungen/hausmeisterservice/page.tsx`
- `app/leistungen/winterdienst/page.tsx`
- `app/leistungen/aussenanlagenpflege/page.tsx`
- `app/leistungen/bueroreinigung/page.tsx`
- `app/leistungen/parkplatzreinigung/page.tsx`
- `app/leistungen/fassadenreinigung/page.tsx`
- `app/leistungen/beschaffungsmanagement/page.tsx`
- `app/leistungen/sonderreinigung/page.tsx`
- `app/leistungen/tiefgaragenreinigung/page.tsx`

### 3. Nicht geandert (bereits korrekt)

**OG-Images der Leistungsseiten:**
Die openGraph.images der einzelnen Leistungsseiten verwenden bereits Unsplash-Bilder (z.B. `https://images.unsplash.com/...`). Diese wurden nicht geandert, da sie funktionieren.

**Favicons:**
Bereits korrekt konfiguriert in `app/layout.tsx`:
- PNG-Format (`/FIMI-LOGO/Fimi-Favicon.png`)
- Alle Grossen definiert (16x16 bis 512x512)
- Apple Touch Icon vorhanden

---

## Validierung

```bash
grep -r "og-image\.jpg" --include="*.tsx" # = 0 Treffer
```

Alle falschen Referenzen wurden erfolgreich entfernt.

---

## Technische Details

### OG/Twitter Tags (layout.tsx)

```tsx
openGraph: {
  images: [{
    url: '/FIMI-LOGO/FIMI-LOGO-WEIße_Schrift_mit-Hintergrund.png',
    width: 1200,
    height: 630,
    alt: 'FIMI Gebaudereinigung - Professionelle Reinigung in Bayern',
  }],
},
twitter: {
  card: 'summary_large_image',
  images: ['/FIMI-LOGO/FIMI-LOGO-WEIße_Schrift_mit-Hintergrund.png'],
},
```

### Hinweis: Twitter vs X

Die Meta-Tags heissen weiterhin `twitter:` (Legacy-Namen). Die Plattform heisst zwar jetzt "X", aber die technischen Tags wurden nicht geandert.

---

## Empfehlung fur spater

Fur optimale Social Sharing Previews sollte ein dediziertes OG-Image erstellt werden:
- **Format:** 1200x630px (16:9)
- **Inhalt:** FIMI-Logo + Slogan + Kontakt auf Navy-Hintergrund
- **Datei:** `/public/og-image.jpg` oder `.png`

Das aktuelle Logo funktioniert, aber ein dediziertes Bild wurde professioneller wirken.

---

## DoD-Prufung

> "Social share preview sieht sauber aus."

| Kriterium | Status |
|-----------|--------|
| OG-Image existiert und wird geladen | OK (Logo) |
| Twitter Card konfiguriert | OK |
| Favicons vorhanden | OK |
| Schema.org Images korrekt | OK |

**Status:** ERLEDIGT

---

---

# P0-16: 404/500 UX + Logging

## Problem

Keine Error-Seiten vorhanden:
- Benutzer sahen bei 404 die Standard-Next.js-Fehlerseite
- Keine Navigation zum Zuruckkehren
- Keine Kontaktmoglichkeit bei Fehlern

## Losung

### 1. Neue Dateien erstellt (3 Stuck)

| Datei | Zweck |
|-------|-------|
| `app/not-found.tsx` | 404 - Seite nicht gefunden |
| `app/error.tsx` | 500 - Laufzeitfehler |
| `app/global-error.tsx` | Kritische Fehler im Root-Layout |

### 2. Features der Error-Seiten

**404 (not-found.tsx):**
- FIMI CI-Farben (Navy #012956, Turkis #109387)
- Top 5 beliebte Seiten mit Links
- CTA-Buttons: Startseite + Kontakt
- Direkte Telefonnummer anklickbar
- Responsive Design

**500 (error.tsx + global-error.tsx):**
- "Erneut versuchen" Button (ruft `reset()`)
- Startseite-Link als Fallback
- Telefonnummer fur Support
- Error-Details nur in Development sichtbar
- console.error() Logging

### 3. Error Logging

**Aktuell implementiert:**
- `console.error()` mit error.message, digest und stack
- In Production: Fehler werden geloggt, aber Details nicht angezeigt

**Optional fur spater:**
- Sentry-Integration fur Production Error Tracking
- Webhook zu Monitoring-System

## DoD-Prufung

> "404 Seite mit funktionierender Navigation"

| Kriterium | Status |
|-----------|--------|
| 404-Seite existiert | OK |
| Navigation vorhanden (Top 5 Links) | OK |
| Kontakt CTA vorhanden | OK |
| 500-Seite existiert | OK |
| Error Logging vorhanden | OK (console.error) |

**Status:** ERLEDIGT

---

---

# P0-17: Security-Headers Basis

## Problem

Keine Security-Headers konfiguriert:
- Website anfällig für Clickjacking
- Keine HSTS-Preload
- Keine Content-Security-Policy

## Losung

### Security-Headers in next.config.js hinzugefugt

| Header | Wert | Zweck |
|--------|------|-------|
| X-DNS-Prefetch-Control | on | Performance |
| Strict-Transport-Security | max-age=63072000; includeSubDomains; preload | HTTPS erzwingen |
| X-Frame-Options | DENY | Clickjacking-Schutz |
| X-Content-Type-Options | nosniff | MIME-Sniffing verhindern |
| X-XSS-Protection | 1; mode=block | XSS-Schutz (Legacy) |
| Referrer-Policy | strict-origin-when-cross-origin | Privacy |
| Permissions-Policy | camera=(), microphone=(), geolocation=() | Feature-Einschränkung |
| Content-Security-Policy | (siehe unten) | Ressourcen-Kontrolle |

### Content-Security-Policy Details

```
default-src 'self';
script-src 'self' 'unsafe-inline' 'unsafe-eval' googletagmanager.com google-analytics.com;
style-src 'self' 'unsafe-inline' fonts.googleapis.com;
img-src 'self' data: blob: images.unsplash.com google-analytics.com;
font-src 'self' fonts.gstatic.com;
connect-src 'self' google-analytics.com analytics.google.com;
frame-ancestors 'none';
base-uri 'self';
form-action 'self';
```

### Geänderte Datei

| Datei | Anderung |
|-------|----------|
| `next.config.js` | Security Headers Array hinzugefugt |

## DoD-Prufung

> "Securityheaders-Check grun"

| Kriterium | Status |
|-----------|--------|
| X-Frame-Options | OK |
| X-Content-Type-Options | OK |
| Strict-Transport-Security | OK |
| Referrer-Policy | OK |
| Permissions-Policy | OK |
| Content-Security-Policy | OK |

**Hinweis:** Der Header-Check kann erst nach Deployment auf HTTPS getestet werden (z.B. auf securityheaders.com).

**Status:** ERLEDIGT

---

**Bearbeitet von:** Claude
**Session:** 2025-12-06
