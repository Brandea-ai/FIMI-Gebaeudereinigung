# Report R0008 - Testverfahren & Lessons Learned

**Datum:** 2025-12-06
**Thema:** Korrektes Performance-Testing
**Status:** DOKUMENTATION

---

## Problem

Bei der Arbeit an P0-18/P0-19/P0-20 wurde Lighthouse lokal gegen `localhost:3000` getestet. Die Ergebnisse waren:

| Metrik | Localhost | Live (Vercel) |
|--------|-----------|---------------|
| Performance Mobile | 62% | **92%** |
| Performance Desktop | ~65% | **99%** |
| Accessibility | 92% | **92-94%** |

**Unterschied: 30-37 Prozentpunkte!**

---

## Ursache

Localhost-Tests sind nicht repräsentativ weil:

1. **Kein CDN** - Vercel Edge Network fehlt
2. **Kein Caching** - Keine Edge-Caches
3. **Keine Bildoptimierung** - Vercel optimiert Bilder automatisch
4. **Langsame Server Response** - Lokaler Dev-Server vs. Vercel Edge
5. **Keine Komprimierung** - Brotli/Gzip fehlt teilweise

---

## Korrekte Vorgehensweise

### DO: Live-Site testen

```
URL: https://fimi-gebaeudereinigung.vercel.app/
Tool: Google PageSpeed Insights (https://pagespeed.web.dev/)
```

### DON'T: Localhost testen

```
FALSCH: lighthouse http://localhost:3000/
FALSCH: lighthouse http://127.0.0.1:3000/
FALSCH: npm run dev && lighthouse
```

---

## Testprozess (verbindlich)

1. **Code ändern** (lokal)
2. **Commit & Push** zu GitHub
3. **Vercel Deployment abwarten** (~1-2 Minuten)
4. **PageSpeed Insights** auf Live-URL testen
5. **Ergebnisse dokumentieren** in Report

---

## PageSpeed Insights Ergebnisse (2025-12-06)

### Mobile
| Metrik | Wert | Status |
|--------|------|--------|
| Performance | 92% | ✅ > 85% |
| Accessibility | 92% | ✅ > 90% |
| Best Practices | 100% | ✅ |
| SEO | 100% | ✅ |
| LCP | 3.2s | ⚠️ (Ziel < 2.5s) |
| TBT | 0ms | ✅ |
| CLS | 0 | ✅ |

### Desktop
| Metrik | Wert | Status |
|--------|------|--------|
| Performance | 99% | ✅ > 85% |
| Accessibility | 94% | ✅ > 90% |
| Best Practices | 100% | ✅ |
| SEO | 100% | ✅ |
| LCP | 0.7s | ✅ |
| TBT | 0ms | ✅ |
| CLS | 0.012 | ✅ |

---

## DoD-Erfüllung

| Task | Kriterium | Ergebnis | Status |
|------|-----------|----------|--------|
| P0-18 | Accessibility > 90% | 92-94% | ✅ PASS |
| P0-19 | DOM-Duplikate behoben | PartnerLogosSlider gefixt | ✅ PASS |
| P0-20 | Performance > 85% | 92-99% | ✅ PASS |

---

## Verbesserungspotenzial (P1)

Trotz guter Werte gibt es noch Optimierungsmöglichkeiten für Sprint 2:

1. **Mobile LCP 3.2s** → Ziel < 2.5s (Hero-Bild weiter optimieren)
2. **Render-blocking Resources** → 380ms Einsparung möglich
3. **Unused JavaScript** → 23KB können noch entfernt werden
4. **Accessibility Kontrast** → Einige Farben haben zu wenig Kontrast

---

## Regel für zukünftige Sessions

> **WICHTIG:** Performance- und Accessibility-Tests IMMER auf der Live-URL durchführen:
>
> https://pagespeed.web.dev/?url=https://fimi-gebaeudereinigung.vercel.app/
>
> NIEMALS localhost oder dev-Server testen!

---

**Bearbeitet von:** Claude
**Session:** 2025-12-06
