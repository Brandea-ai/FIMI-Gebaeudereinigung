# Report R0009 - Referenzen-Seite Performance & Accessibility

**Datum:** 2025-12-06
**Task-IDs:** Performance + Accessibility Optimierung
**Status:** ERLEDIGT
**Seite:** /referenzen

---

## Ausgangslage (PageSpeed Insights)

| Metrik | Vorher |
|--------|--------|
| Performance | 74% |
| Accessibility | 88% |
| LCP | 7.2s |
| Best Practices | 100% |
| SEO | 100% |

---

## Durchgeführte Optimierungen

### 1. Bild-Optimierung (LCP-Fix)

**Problem:** 50 Referenzen mit je 3 Bildern (w=800), alle auf einmal geladen.

**Lösung:**
- Erste 6 Bilder mit `priority={true}` für schnelles LCP
- Restliche Bilder mit `loading="lazy"`
- Bildgröße reduziert: `w=800` → `w=400` für Thumbnails
- Quality reduziert: 75 → 60 für Thumbnails
- `sizes`-Attribut korrigiert: `50vw` auf Mobile statt `100vw`

```tsx
// Vorher:
<Image
  src={referenz.bilder[0]}
  quality={75}
  sizes="(max-width: 768px) 100vw, 33vw"
/>

// Nachher:
<Image
  src={referenz.bilder[0].replace('w=800', 'w=400')}
  quality={60}
  priority={index < 6}
  loading={index < 6 ? undefined : 'lazy'}
  sizes="(max-width: 768px) 50vw, 33vw"
/>
```

### 2. Animation-Optimierung

**Problem:** Framer Motion Delays verzögerten das Rendering.

**Lösung:**
- `delay: index * 0.03` entfernt
- `duration: 0.3` → `duration: 0.2` reduziert

### 3. Accessibility-Fixes

**a) Select-Labels hinzugefügt (WCAG 1.3.1):**
```tsx
<label htmlFor="filter-jahr" className="sr-only">Nach Jahr filtern</label>
<select id="filter-jahr" ...>

<label htmlFor="filter-branche" className="sr-only">Nach Branche filtern</label>
<select id="filter-branche" ...>

<label htmlFor="filter-leistung" className="sr-only">Nach Leistung filtern</label>
<select id="filter-leistung" ...>
```

**b) aria-hidden für dekorative Icons (WCAG 1.1.1):**
- CheckCircle (5x)
- ArrowRight (6x)
- Building2 (1x)
- Award (1x)
- MapPin (2x)
- Maximize2 (2x)

**c) Section-Labels für Screenreader (WCAG 1.3.1):**
```tsx
<section aria-labelledby="hero-heading">
  <h1 id="hero-heading">...</h1>

<section aria-labelledby="projekte-heading">
  <h2 id="projekte-heading">...</h2>

<section aria-labelledby="cta-heading">
  <h2 id="cta-heading">...</h2>

<section aria-label="Projektfilter">
```

**d) Modal-Accessibility (WCAG 4.1.2):**
```tsx
<motion.div
  role="dialog"
  aria-modal="true"
  aria-labelledby="modal-title"
>
  ...
  <h2 id="modal-title">...</h2>
```

**e) Filter-Gruppe semantisch (WCAG 1.3.1):**
```tsx
<div role="group" aria-label="Projektfilter-Optionen">
```

### 4. Modal-Bild-Optimierung

- Bildgröße: `w=800` → `w=600`
- Quality: 80 → 75
- `loading="eager"` für sofortiges Laden im Modal

---

## Geänderte Dateien

| Datei | Änderungen |
|-------|------------|
| `app/referenzen/page.tsx` | ~25 Änderungen (Bilder, Labels, ARIA, Animations) |

---

## Erwartete Verbesserungen

| Metrik | Vorher | Erwartet |
|--------|--------|----------|
| Performance | 74% | 85%+ |
| Accessibility | 88% | 92%+ |
| LCP | 7.2s | ~3.5s |

### Hauptgründe für Verbesserung:

1. **LCP**: Erste 6 Bilder mit priority, kleinere Bildgrößen
2. **Accessibility**: Labels für alle Formularelemente, ARIA für Modal
3. **DOM**: Keine Änderung (50 Referenzen bleiben)

---

## Hinweise

1. **LCP wird nicht unter 2.5s fallen** weil:
   - 50 Referenzen mit vielen Bildern
   - Unsplash-Bilder (kein eigenes CDN)
   - Ohne UI-Änderung (z.B. "Mehr laden" Button) nicht weiter optimierbar

2. **Für weitere LCP-Verbesserung** würde benötigt:
   - "Mehr laden" Button (nur 12 initial)
   - Eigene Bilder statt Unsplash
   - Virtualisierung des Grids

3. **Keine UI/UX-Änderungen** gemacht wie angefordert.

---

## Nächste Schritte

- [ ] Nach Vercel Deploy: PageSpeed Insights erneut testen
- [ ] Bei Bedarf: Weitere Seiten optimieren

---

**Bearbeitet von:** Claude
**Session:** 2025-12-06
